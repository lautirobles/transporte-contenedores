# spring.application.name=api-gateway

# # Puerto del API Gateway
# server.port=8080

# # Rutas para el servicio de gestión
# spring.cloud.gateway.routes[0].id=gestion-service
# spring.cloud.gateway.routes[0].uri=http://gestion-service:8081
# spring.cloud.gateway.routes[0].predicates[0]=Path=/api/gestion/**

# # Rutas para el servicio de logística
# spring.cloud.gateway.routes[1].id=logistica-service
# spring.cloud.gateway.routes[1].uri=http://logistica-service:8082
# spring.cloud.gateway.routes[1].predicates[0]=Path=/api/logistica/**

# # Configuración de actuator para monitoreo
# management.endpoints.web.exposure.include=*
# management.endpoint.health.show-details=always

# # ==============================
# # CONFIGURACIÓN DE KEYCLOAK (OAUTH2 CLIENT) Y JWT
# # ==============================
# spring.security.oauth2.resourceserver.jwt.issuer-uri=http://keycloak:8080/realms/tpi-backend

# keycloak.realm=logistica-realm
# keycloak.resource=backend-logistica  # ← EXACTAMENTE igual
# keycloak.auth-server-url=http://localhost:8080/auth
# keycloak.public-client=true


# # OAuth2 Configuration
# spring.security.oauth2.client.registration.keycloak.client-id=transport-app
# spring.security.oauth2.client.registration.keycloak.client-secret=0gvrzFXPl9rrU7w3vSlmpVKXqZAv1Cfj
# spring.security.oauth2.client.registration.keycloak.scope=openid,profile,email
# spring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code
# spring.security.oauth2.client.registration.keycloak.redirect-uri=http://localhost:8080/login/oauth2/code/keycloak

# spring.security.oauth2.client.provider.keycloak.issuer-uri=http://localhost:8080/auth/realms/tpi-backend



# spring.cloud.gateway.default-filters[0]=TokenRelay

# spring.main.allow-bean-definition-overriding=true



spring.application.name=api-gateway
server.port=8080

# Rutas del Gateway
spring.cloud.gateway.routes[0].id=gestion-service
spring.cloud.gateway.routes[0].uri=http://gestion-service:8081
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/v1/gestion/**

spring.cloud.gateway.routes[1].id=logistica-service
spring.cloud.gateway.routes[1].uri=http://logistica-service:8082
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/v1/logistica/**

# Actuator
management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always

# ==============================
# SOLO UNA CONFIGURACIÓN - ELIMINÁ LO DEMÁS
# ==============================

# Opción A: Si el Gateway maneja autenticación (TokenRelay)
spring.security.oauth2.client.registration.keycloak.client-id=transport-app
spring.security.oauth2.client.registration.keycloak.client-secret=0gvrzFXPl9rrU7w3vSlmpVKXqZAv1Cfj
spring.security.oauth2.client.registration.keycloak.scope=openid,profile
spring.security.oauth2.client.provider.keycloak.issuer-uri=http://localhost:8080/realms/tpi-backend

spring.cloud.gateway.default-filters=TokenRelay